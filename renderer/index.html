<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LMS Center - Kareem Adel</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>LMS Center - Kareem Adel</h1>
      <div class="header-actions">
        <button id="debugBtn" class="btn">Debug</button>
        <button id="settingsBtn" class="btn">Settings</button>
      </div>
    </header>

    <div id="settingsPanel" class="settings-panel hidden">
      <form id="settingsForm">
        <button type="button" class="btn-close-settings" id="closeSettings">×</button>
        <div class="settings-body">
        <div class="form-group">
          <label for="lmsType">LMS Type:</label>
          <select id="lmsType" name="lmsType">
            <option value="canvas">Canvas</option>
            <option value="moodle">Moodle</option>
            <option value="blackboard">Blackboard</option>
          </select>
        </div>

        <div class="form-group">
          <label for="lmsUrl">LMS URL:</label>
          <input type="url" id="lmsUrl" name="lmsUrl" placeholder="https://your-lms.edu" required>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="useCredentialLogin" name="useCredentialLogin" checked>
            Use username/password (recommended)
          </label>
        </div>

        <div id="credentialFields">
          <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" placeholder="Your LMS username" autocomplete="username">
          </div>

          <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" placeholder="Your LMS password" autocomplete="current-password">
          </div>
        </div>

        <div id="tokenField" class="hidden">
          <div class="form-group">
            <label for="apiToken">API Token:</label>
            <input type="password" id="apiToken" name="apiToken" placeholder="Your API token">
            <small>Get your token from your LMS account settings</small>
          </div>
        </div>

        <div class="form-group">
          <label for="checkInterval">Check Interval (minutes):</label>
          <input type="number" id="checkInterval" name="checkInterval" value="15" min="5" max="120">
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="soundEnabled" name="soundEnabled" checked>
            Enable notification sound
          </label>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="autoDownload" name="autoDownload" checked>
            Automatically download assignment files
          </label>
        </div>

        <div class="form-group">
          <label for="downloadPath">Download Folder:</label>
          <input type="text" id="downloadPath" name="downloadPath" placeholder="Default: Documents/LMS Downloads">
          <small>Leave empty for default location</small>
        </div>

        <div class="form-group">
          <label for="geminiApiKey">Gemini API Key (Optional):</label>
          <input type="password" id="geminiApiKey" name="geminiApiKey" placeholder="For AI assignment solving">
          <small>Get your key from Google AI Studio</small>
        </div>

        <div class="form-group">
          <label for="geminiModel">Gemini Model:</label>
          <select id="geminiModel" name="geminiModel">
            <option value="">Loading models...</option>
          </select>
          <small>Choose AI model for solving assignments</small>
        </div>

        <div class="form-group">
          <label for="extraRules">Extra Rules for AI (Optional):</label>
          <textarea id="extraRules" name="extraRules" rows="4" placeholder="Add custom rules for AI to follow on every assignment...
Example:
- Always explain each step in detail
- Use simple language
- Include examples"></textarea>
          <small>These rules will be sent to AI with every assignment solution request</small>
        </div>

        <div class="form-group">
          <label>PDF Header Fields:</label>
          <div class="checkbox-group">
            <label><input type="checkbox" name="pdfHeaderField" value="name" checked> Assignment Name</label>
            <label><input type="checkbox" name="pdfHeaderField" value="id" checked> Assignment ID</label>
            <label><input type="checkbox" name="pdfHeaderField" value="course"> Course Name</label>
            <label><input type="checkbox" name="pdfHeaderField" value="dueDate"> Due Date</label>
            <label><input type="checkbox" name="pdfHeaderField" value="category"> Category</label>
            <label><input type="checkbox" name="pdfHeaderField" value="generated"> Generated Date</label>
          </div>
          <small>Select which information to show at the top of PDFs (default: Name + ID only)</small>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="useHandwriting" name="useHandwriting" checked>
            Use handwriting style for PDFs
          </label>
          <small>Makes text look handwritten with natural fonts and paper texture. Math equations rendered beautifully with LaTeX.</small>
        </div>

        <div class="form-group" id="handwritingOptions" style="display: none; margin-left: 1.5rem;">
          <label for="handwritingFont">Handwriting Font Style:</label>
          <select id="handwritingFont" name="handwritingFont">
            <optgroup label="⭐ Most Realistic & Natural">
              <option value="Homemade Apple" selected>Homemade Apple (Most Authentic)</option>
              <option value="Just Another Hand">Just Another Hand (Very Natural)</option>
              <option value="Covered By Your Grace">Covered By Your Grace (Casual)</option>
              <option value="Patrick Hand">Patrick Hand (Clean & Readable)</option>
              <option value="Handlee">Handlee (Neat Handwriting)</option>
            </optgroup>
            <optgroup label="📝 Casual & Friendly">
              <option value="Caveat">Caveat (Natural & Casual)</option>
              <option value="Indie Flower">Indie Flower (Playful)</option>
              <option value="Shadows Into Light">Shadows Into Light (Elegant)</option>
              <option value="Architects Daughter">Architects Daughter (Casual)</option>
              <option value="Gloria Hallelujah">Gloria Hallelujah (Cheerful)</option>
              <option value="Gochi Hand">Gochi Hand (Rounded)</option>
              <option value="The Girl Next Door">The Girl Next Door (Friendly)</option>
            </optgroup>
            <optgroup label="✍️ Bold & Expressive">
              <option value="Kalam">Kalam (Bold)</option>
              <option value="Permanent Marker">Permanent Marker (Marker Style)</option>
              <option value="Rock Salt">Rock Salt (Rough)</option>
              <option value="Amatic SC">Amatic SC (Bold Casual)</option>
            </optgroup>
            <optgroup label="💫 Flowing & Elegant">
              <option value="Dancing Script">Dancing Script (Flowing Cursive)</option>
              <option value="Satisfy">Satisfy (Elegant Script)</option>
              <option value="Courgette">Courgette (Flowing)</option>
              <option value="League Script">League Script (Elegant)</option>
              <option value="Waiting for the Sunrise">Waiting for the Sunrise (Flowing)</option>
            </optgroup>
            <optgroup label="🎨 Unique & Artistic">
              <option value="Reenie Beanie">Reenie Beanie (Natural Script)</option>
              <option value="Sue Ellen Francisco">Sue Ellen Francisco (Casual Script)</option>
              <option value="Schoolbell">Schoolbell (Educational)</option>
              <option value="Comic Neue">Comic Neue (Modern Comic)</option>
            </optgroup>
          </select>
          <small>Choose the font that best matches your natural handwriting style</small>
        </div>

        <div class="form-group" id="handwritingColorSize" style="display: none; margin-left: 1.5rem;">
          <label for="handwritingColor">Ink Color:</label>
          <div style="display: flex; gap: 10px; align-items: center;">
            <input type="color" id="handwritingColor" name="handwritingColor" value="#2d2d2d">
            <span id="handwritingColorPreview" style="font-size: 14px; color: #666;">Dark Gray (Natural)</span>
          </div>
          <small>Choose your pen/ink color (default: natural dark gray)</small>
        </div>

        <div class="form-group" id="handwritingFontSize" style="display: none; margin-left: 1.5rem;">
          <label for="fontSize">Font Size:</label>
          <div style="display: flex; gap: 10px; align-items: center;">
            <input type="range" id="fontSize" name="fontSize" min="14" max="24" value="18" step="1">
            <span id="fontSizeValue" style="min-width: 50px;">18px</span>
          </div>
          <small>Adjust the text size (14px - 24px, default: 18px)</small>
        </div>

        <div class="form-group" id="handwritingPaperStyle" style="display: none; margin-left: 1.5rem;">
          <label for="paperStyle">Paper Style:</label>
          <select id="paperStyle" name="paperStyle">
            <optgroup label="📄 Classic Papers">
              <option value="aged-vintage" selected>Aged Vintage Paper (Coffee Stains)</option>
              <option value="clean-white">Clean White Paper</option>
              <option value="cream-white">Cream White Paper</option>
              <option value="off-white">Off-White Paper</option>
              <option value="recycled">Recycled Paper (Eco)</option>
            </optgroup>
            <optgroup label="📓 Notebook Styles">
              <option value="lined-notebook">Lined Notebook Paper</option>
              <option value="college-ruled">College Ruled Paper</option>
              <option value="wide-ruled">Wide Ruled Paper</option>
              <option value="graph-paper">Graph Paper (Grid)</option>
              <option value="dot-grid">Dot Grid Paper</option>
              <option value="engineering">Engineering Paper</option>
            </optgroup>
            <optgroup label="🎨 Textured & Artistic">
              <option value="parchment">Parchment Paper (Ancient)</option>
              <option value="watercolor">Watercolor Paper</option>
              <option value="canvas-texture">Canvas Texture</option>
              <option value="linen">Linen Paper</option>
              <option value="kraft">Kraft Paper (Brown)</option>
              <option value="newsprint">Newsprint (Gray)</option>
            </optgroup>
            <optgroup label="☕ Aged & Worn">
              <option value="tea-stained">Tea Stained Paper</option>
              <option value="coffee-aged">Coffee Aged Paper</option>
              <option value="vintage-worn">Vintage Worn Paper</option>
              <option value="burned-edges">Burned Edges Paper</option>
              <option value="old-book">Old Book Page</option>
            </optgroup>
            <optgroup label="💼 Professional">
              <option value="legal-pad">Legal Pad (Yellow)</option>
              <option value="blueprint">Blueprint Paper</option>
              <option value="ledger">Ledger Paper</option>
              <option value="vellum">Vellum Paper</option>
            </optgroup>
            <optgroup label="🌈 Colored Papers">
              <option value="pastel-blue">Pastel Blue</option>
              <option value="pastel-pink">Pastel Pink</option>
              <option value="pastel-yellow">Pastel Yellow</option>
              <option value="pastel-green">Pastel Green</option>
              <option value="light-gray">Light Gray</option>
            </optgroup>
          </select>
          <small>Choose paper texture and background style</small>
        </div>

        <div class="form-group" id="handwritingRandomization" style="display: none; margin-left: 1.5rem;">
          <label>Handwriting Humanization & Randomization:</label>
          <p style="font-size: 13px; color: #666; margin: 8px 0;">Make your handwriting look more natural with imperfections and variations</p>

          <div style="margin: 15px 0;">
            <label for="rotationVariance">Rotation Variance (Character Tilt):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="rotationVariance" name="rotationVariance" min="0" max="3" value="0.5" step="0.1">
              <span id="rotationVarianceValue" style="min-width: 80px;">0.5 degrees</span>
            </div>
            <small>How much each line/word tilts randomly (0 = perfect, 3 = very tilted)</small>
          </div>

          <div style="margin: 15px 0;">
            <label for="spacingVariance">Letter Spacing Variance:</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="spacingVariance" name="spacingVariance" min="0" max="20" value="5" step="1">
              <span id="spacingVarianceValue" style="min-width: 60px;">5%</span>
            </div>
            <small>Random spacing between letters (0 = perfect spacing, 20 = very uneven)</small>
          </div>

          <div style="margin: 15px 0;">
            <label for="wordSpacingVariance">Word Spacing Variance:</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="wordSpacingVariance" name="wordSpacingVariance" min="0" max="30" value="10" step="1">
              <span id="wordSpacingVarianceValue" style="min-width: 60px;">10%</span>
            </div>
            <small>Random spacing between words (0 = consistent, 30 = very varied)</small>
          </div>

          <div style="margin: 15px 0;">
            <label for="baselineVariance">Baseline Shift (Vertical Wobble):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="baselineVariance" name="baselineVariance" min="0" max="3" value="0.8" step="0.1">
              <span id="baselineVarianceValue" style="min-width: 60px;">0.8px</span>
            </div>
            <small>Vertical position wobble of text (0 = straight line, 3 = wavy baseline)</small>
          </div>

          <div style="margin: 15px 0;">
            <label for="inkDensityVariance">Ink Density Variance (Pen Pressure):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="inkDensityVariance" name="inkDensityVariance" min="0" max="100" value="25" step="5">
              <span id="inkDensityVarianceValue" style="min-width: 60px;">25%</span>
            </div>
            <small>Simulate pen pressure changes (0 = uniform, 100 = very varied darkness)</small>
          </div>

          <div style="margin: 15px 0;">
            <label for="blurVariance">Blur & Smudge Variance:</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="blurVariance" name="blurVariance" min="0" max="50" value="15" step="5">
              <span id="blurVarianceValue" style="min-width: 60px;">15%</span>
            </div>
            <small>Random smudging and blur effects (0 = crystal clear, 50 = naturally smudged)</small>
          </div>

          <div style="margin: 15px 0;">
            <label for="sizeVariance">Character Size Variance:</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="sizeVariance" name="sizeVariance" min="0" max="15" value="3" step="1">
              <span id="sizeVarianceValue" style="min-width: 60px;">3%</span>
            </div>
            <small>Random size variations in letters (0 = uniform, 15 = visibly different sizes)</small>
          </div>

          <div style="margin: 15px 0; padding: 12px; background: rgba(52, 152, 219, 0.08); border-radius: 6px; border-left: 3px solid #3498db;">
            <label style="display: flex; align-items: center; cursor: pointer;">
              <input type="checkbox" id="enableMarginDoodles" name="enableMarginDoodles" checked style="margin-right: 8px;">
              <span style="font-weight: 500;">Enable Margin Doodles & Annotations</span>
            </label>
            <small style="display: block; margin-top: 6px; margin-left: 24px;">Add random checkmarks, stars, underlines, and margin notes (✓ ★ → !)</small>
          </div>

          <div style="margin: 15px 0; padding: 12px; background: rgba(46, 204, 113, 0.08); border-radius: 6px; border-left: 3px solid #2ecc71;">
            <label style="display: flex; align-items: center; cursor: pointer;">
              <input type="checkbox" id="enableInkSpots" name="enableInkSpots" checked style="margin-right: 8px;">
              <span style="font-weight: 500;">Enable Ink Spots & Bleed Effects</span>
            </label>
            <small style="display: block; margin-top: 6px; margin-left: 24px;">Add subtle ink spots, bleeds, and smudges throughout the page</small>
          </div>

          <div style="margin: 20px 0 10px 0; padding-top: 15px; border-top: 2px dashed rgba(0,0,0,0.1);">
            <button type="button" id="resetRandomization" class="btn btn-secondary" style="width: 100%;">
              🔄 Reset to Default Humanization
            </button>
            <small style="display: block; margin-top: 8px; text-align: center; color: #888;">Restore recommended natural handwriting settings</small>
          </div>
        </div>

        <!-- Advanced Handwriting Settings -->
        <div id="advancedHandwritingSettings" style="display: none;">

          <!-- Background Selection -->
          <div class="form-group">
            <label>📄 Paper Background:</label>
            <select id="paperBackground" name="paperBackground">
              <optgroup label="Plain Papers">
                <option value="plain-white" selected>Plain White Paper</option>
                <option value="wide-ruled-lined">Wide Ruled Lined Paper</option>
                <option value="lined-with-margin">Lined Paper with Margin</option>
                <option value="blank-spiral-notepad">Blank Spiral Notepad</option>
                <option value="blank-spiral-sheet">Blank Spiral Notepad Sheet</option>
                <option value="lined-spiral">Lined Spiral Notepad</option>
              </optgroup>
              <optgroup label="Grid Papers">
                <option value="blue-grid">Blue Grid Graph Paper</option>
                <option value="orange-grid">Orange Grid Paper</option>
                <option value="dotted-grid">Dotted Grid Paper</option>
                <option value="white-grid">Classic White Grid Paper</option>
                <option value="light-gray-graph">Light Gray Graph Paper</option>
                <option value="square-grid">Square Grid Paper</option>
                <option value="classic-grid">Classic Grid Paper</option>
              </optgroup>
              <optgroup label="Notebook Papers">
                <option value="realistic-spiral">Realistic Blank Spiral Notepad</option>
                <option value="light-blue-ruled">Light Blue Ruled Paper</option>
                <option value="blue-lines-spiral">Blue Lines Spiral Notepad</option>
                <option value="grey-lined-sheet">Grey Lined Paper Sheet</option>
                <option value="lined-classic">Lined Notebook Paper Classic</option>
                <option value="lined-with-margin">Lined Notebook Paper with Margin</option>
                <option value="lined-red-margin">Lined Notebook Paper with Red Margin</option>
                <option value="lined-fine">Lined Notebook Paper Fine</option>
                <option value="detailed-notebook">Blank Detailed Notebook Paper</option>
                <option value="school-ruler">School Ruler Notebook Paper</option>
                <option value="simple-lined">Simple Lined Paper</option>
                <option value="spiral-red-margin">Spiral Notepad with Red Margin</option>
                <option value="realistic-lined">Realistic Notebook Lined Paper</option>
              </optgroup>
              <optgroup label="Special Papers">
                <option value="plain-white-notepad">Plain White Notepad</option>
                <option value="notepad-orange-edge">Notepad with Orange Edge</option>
                <option value="mirror-even-pages">Mirror Paper on even pages</option>
              </optgroup>
            </select>
            <small>Choose the paper background style for your handwritten documents</small>
          </div>

          <!-- Table Background -->
          <div class="form-group">
            <label>🪵 Table/Desk Background:</label>
            <select id="tableBackground" name="tableBackground">
              <option value="none">None (Plain)</option>
              <option value="dark-charcoal">Dark Charcoal Workspace</option>
              <option value="golden-oak">Golden Oak Desk</option>
              <option value="rustic-walnut">Rustic Walnut Finish</option>
              <option value="classic-mahogany">Classic Mahogany Workspace</option>
              <option value="grey-weathered">Grey Weathered Planks</option>
              <option value="midnight-blue">Midnight Blue Woodgrain</option>
              <option value="bright-maple">Bright Maple Workspace</option>
              <option value="desert-oak">Desert Oak Surface</option>
              <option value="steel-ash">Steel Ash Desk</option>
              <option value="amber-vintage">Amber Vintage Wood</option>
              <option value="slate-grey">Slate Grey Canvas</option>
              <option value="rich-cedar">Rich Cedar Planks</option>
              <option value="pristine-white">Pristine White Desk</option>
              <option value="pale-ash">Pale Ash</option>
              <option value="warm-walnut">Warm Walnut</option>
              <option value="white-pine">White Pine</option>
              <option value="blonde-oak">Blonde Oak</option>
              <option value="walnut">Walnut</option>
              <option value="espresso-ash">Espresso Ash</option>
              <option value="grey-oak">Grey Oak</option>
              <option value="honey-maple">Honey Maple</option>
              <option value="light-bamboo">Light Bamboo</option>
              <option value="silver-driftwood">Silver Driftwood</option>
              <option value="rich-cherry">Rich Cherry</option>
              <option value="modern-dark-wood">Modern Dark Wood Workspace</option>
            </select>
            <small>Table background will be visible after converting to handwriting</small>
          </div>

          <!-- Font Selection with Language Support -->
          <div class="form-group">
            <label>✍️ Font Selection:</label>
            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
              <button type="button" class="btn btn-secondary" data-font-filter="all">All</button>
              <button type="button" class="btn btn-secondary" data-font-filter="latin">Latin</button>
              <button type="button" class="btn btn-secondary" data-font-filter="cyrillic">Cyrillic</button>
              <button type="button" class="btn btn-secondary" data-font-filter="chinese">Chinese</button>
              <button type="button" class="btn btn-secondary" data-font-filter="arabic">Arabic</button>
            </div>
            <input type="text" id="fontSearch" placeholder="Search fonts..." style="margin-bottom: 10px;">
            <select id="customFont" name="customFont" size="8" style="width: 100%;">
              <option value="font1" data-languages="latin">Handwriting Font 1 (Latin)</option>
              <option value="font2" data-languages="latin">Handwriting Font 2 (Latin)</option>
              <option value="font3" data-languages="latin">Handwriting Font 3 (Latin)</option>
              <option value="font4" data-languages="latin">Handwriting Font 4 (Latin)</option>
              <option value="font5" data-languages="latin">Handwriting Font 5 (Latin)</option>
              <option value="font6" data-languages="latin">Handwriting Font 6 (Latin)</option>
              <option value="font7" data-languages="latin,cyrillic">Handwriting Font 7 (Latin, Cyrillic)</option>
              <option value="font8" data-languages="latin,cyrillic">Handwriting Font 8 (Latin, Cyrillic)</option>
            </select>
            <div style="margin-top: 10px;">
              <label for="customFontUpload">Upload Custom Font:</label>
              <input type="file" id="customFontUpload" accept=".ttf,.otf,.woff,.woff2" style="margin-top: 5px;">
              <small>Drag & drop a custom font here, or click to select (Max size: 10MB)</small>
            </div>
          </div>

          <!-- Font Customization -->
          <div class="form-group">
            <label>Font Size (px):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="fontSizeAdvanced" name="fontSizeAdvanced" min="12" max="48" value="30" step="1">
              <input type="number" id="fontSizeAdvancedValue" value="30" min="12" max="48" style="width: 80px;">
            </div>
          </div>

          <div class="form-group">
            <label>Line Height (multiplier):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="lineHeight" name="lineHeight" min="0.8" max="3.0" value="1.30" step="0.05">
              <input type="number" id="lineHeightValue" value="1.30" min="0.8" max="3.0" step="0.05" style="width: 80px;">
            </div>
          </div>

          <div class="form-group">
            <label>Letter Spacing (px):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="letterSpacing" name="letterSpacing" min="-5" max="10" value="0" step="0.5">
              <input type="number" id="letterSpacingValue" value="0" min="-5" max="10" step="0.5" style="width: 80px;">
            </div>
          </div>

          <div class="form-group">
            <label>Word Spacing (px):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="wordSpacing" name="wordSpacing" min="-5" max="20" value="0" step="1">
              <input type="number" id="wordSpacingValue" value="0" min="-5" max="20" step="1" style="width: 80px;">
            </div>
          </div>

          <!-- Effects -->
          <div class="form-group">
            <label>✨ Effects (visible after generation):</label>
            <div class="checkbox-group">
              <label><input type="checkbox" name="enableBlur" id="enableBlur"> Enable blur effect</label>
              <label><input type="checkbox" name="enableShading" id="enableShading"> Enable shading effect</label>
              <label><input type="checkbox" name="enablePaperShadow" id="enablePaperShadow"> Enable paper shadow</label>
              <label><input type="checkbox" name="enablePaperTexture" id="enablePaperTexture" checked> Enable paper texture</label>
              <label><input type="checkbox" name="enableShadowSilhouette" id="enableShadowSilhouette"> Enable Shadow Silhouette (NEW)</label>
              <label><input type="checkbox" name="enablePaperRotation" id="enablePaperRotation"> Enable paper rotation</label>
              <label><input type="checkbox" name="enableInkFlow" id="enableInkFlow"> Enable ink flow variation</label>
            </div>
          </div>

          <!-- Margins -->
          <div class="form-group">
            <label>📏 Margins:</label>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
              <div>
                <label for="marginTop">Top (px):</label>
                <input type="number" id="marginTop" name="marginTop" value="20" min="0" max="100">
              </div>
              <div>
                <label for="marginRight">Right (px):</label>
                <input type="number" id="marginRight" name="marginRight" value="20" min="0" max="100">
              </div>
              <div>
                <label for="marginBottom">Bottom (px):</label>
                <input type="number" id="marginBottom" name="marginBottom" value="20" min="0" max="100">
              </div>
              <div>
                <label for="marginLeft">Left (px):</label>
                <input type="number" id="marginLeft" name="marginLeft" value="20" min="0" max="100">
              </div>
            </div>
            <label style="margin-top: 10px;">
              <input type="checkbox" id="mirrorMargins" name="mirrorMargins">
              Mirror left and right margins on even pages
            </label>
          </div>

          <!-- Even Page Margins -->
          <div class="form-group" id="evenPageMargins" style="display: none;">
            <label>📏 Margins (Even Pages):</label>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
              <div>
                <label for="marginTopEven">Top (px):</label>
                <input type="number" id="marginTopEven" name="marginTopEven" value="20" min="0" max="100">
              </div>
              <div>
                <label for="marginRightEven">Right (px):</label>
                <input type="number" id="marginRightEven" name="marginRightEven" value="20" min="0" max="100">
              </div>
              <div>
                <label for="marginBottomEven">Bottom (px):</label>
                <input type="number" id="marginBottomEven" name="marginBottomEven" value="20" min="0" max="100">
              </div>
              <div>
                <label for="marginLeftEven">Left (px):</label>
                <input type="number" id="marginLeftEven" name="marginLeftEven" value="20" min="0" max="100">
              </div>
            </div>
          </div>

          <!-- Text Settings -->
          <div class="form-group">
            <label>📝 Text Settings:</label>
            <div class="checkbox-group">
              <label><input type="checkbox" name="randomWordRotation" id="randomWordRotation"> Enable Random Word Rotation</label>
              <label><input type="checkbox" name="randomLetterRotation" id="randomLetterRotation"> Enable Random Letter Rotation</label>
              <label><input type="checkbox" name="randomIndentation" id="randomIndentation"> Enable Random Indentation</label>
            </div>
          </div>

          <div class="form-group" id="indentationRange" style="display: none;">
            <label>Indentation Range (px):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="indentationRangeSlider" name="indentationRangeSlider" min="0" max="50" value="5" step="1">
              <input type="number" id="indentationRangeValue" value="5" min="0" max="50" step="1" style="width: 80px;">
            </div>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="enableHyphenation" name="enableHyphenation">
              Enable Hyphenation
            </label>
          </div>

          <div class="form-group">
            <label>Paragraph Spacing (px):</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="range" id="paragraphSpacing" name="paragraphSpacing" min="0" max="50" value="0" step="1">
              <input type="number" id="paragraphSpacingValue" value="0" min="0" max="50" step="1" style="width: 80px;">
            </div>
          </div>

          <!-- Output Settings -->
          <div class="form-group">
            <label>⚙️ Output Settings:</label>
            <div style="display: grid; gap: 10px;">
              <div>
                <label for="outputFormat">Output Format:</label>
                <select id="outputFormat" name="outputFormat">
                  <option value="pdf">PDF</option>
                  <option value="png">PNG Image</option>
                  <option value="jpg">JPEG Image</option>
                  <option value="svg">SVG Vector</option>
                </select>
              </div>
              <div>
                <label for="outputQuality">Output Quality:</label>
                <select id="outputQuality" name="outputQuality">
                  <option value="draft">Draft (Fast)</option>
                  <option value="normal" selected>Normal</option>
                  <option value="high">High Quality</option>
                  <option value="print">Print Quality</option>
                </select>
              </div>
              <div>
                <label for="pageSize">Page Size:</label>
                <select id="pageSize" name="pageSize">
                  <option value="a4" selected>A4</option>
                  <option value="letter">Letter</option>
                  <option value="legal">Legal</option>
                  <option value="a5">A5</option>
                </select>
              </div>
            </div>
          </div>

        </div>

        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Save Settings</button>
          <button type="button" id="cancelBtn" class="btn btn-secondary">Cancel</button>
        </div>
      </form>
    </div>

    <div id="debugPanel" class="debug-panel hidden">
      <h2>Debug Console</h2>
      <button id="closeDebug" class="btn btn-close">×</button>
      <div class="debug-controls">
        <button id="clearLogs" class="btn">Clear</button>
        <button id="refreshData" class="btn">Refresh Data</button>
      </div>
      <div id="debugLogs" class="debug-logs"></div>
    </div>

    <main id="mainContent">
      <div class="status-bar">
        <span id="connectionStatus">Disconnected</span>
        <span id="lastCheck">Never checked</span>
      </div>

      <div class="view-controls">
        <button class="tab-btn active" data-view="courses">Courses</button>
        <button class="tab-btn" data-view="assignments">Assignments</button>
        <button class="tab-btn" data-view="lectures">Lectures</button>
      </div>

      <div id="coursesView" class="content-view">
        <div id="coursesList" class="courses-list">
          <div class="empty-state">
            <p>No courses found</p>
            <p class="hint">Configure your LMS settings to get started</p>
          </div>
        </div>
      </div>

      <div id="assignmentsView" class="content-view hidden">
        <div class="filter-controls">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="upcoming">Upcoming</button>
          <button class="filter-btn" data-filter="overdue">Overdue</button>
          <button class="filter-btn" data-filter="submitted">Submitted</button>
          <button class="filter-btn" data-filter="not-submitted">Not Submitted</button>
        </div>
        <div id="assignmentList" class="assignment-list">
          <div class="empty-state">
            <p>No assignments found</p>
            <p class="hint">All caught up!</p>
          </div>
        </div>
      </div>

      <div id="lecturesView" class="content-view hidden">
        <div id="lecturesList" class="lectures-list">
          <div class="empty-state">
            <p>No lectures found</p>
            <p class="hint">Check back later</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Submit Assignment Modal -->
  <div id="submitModal" class="modal hidden">
    <div class="modal-overlay" onclick="closeSubmitDialog()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Submit Assignment</h2>
        <button class="btn-close" onclick="closeSubmitDialog()">×</button>
      </div>
      <div class="modal-body">
        <div id="submitAssignmentInfo" class="submit-info"></div>

        <div class="form-group">
          <label for="submissionComment">Comment (Optional):</label>
          <textarea id="submissionComment" rows="3" placeholder="Add a comment for your submission..."></textarea>
        </div>

        <div class="form-group">
          <label>Attachments:</label>
          <div id="submissionAttachments" class="submission-attachments">
            <!-- Attachments will be populated here -->
          </div>
          <div class="attachment-buttons">
            <button type="button" class="btn btn-secondary" onclick="addCustomAttachment()">
              + Add File
            </button>
            <button type="button" class="btn btn-secondary" onclick="openHandwritingModal()">
              ✏️ Handwrite Solution
            </button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn" onclick="closeSubmitDialog()">Cancel</button>
        <button class="btn btn-primary" onclick="submitAssignment()">Submit Assignment</button>
      </div>
    </div>
  </div>

  <!-- Handwriting Modal -->
  <div id="handwritingModal" class="modal hidden">
    <div class="modal-overlay" onclick="closeHandwritingModal()"></div>
    <div class="modal-content handwriting-modal">
      <div class="modal-header">
        <h2>Handwriting Pad</h2>
        <button class="btn-close" onclick="closeHandwritingModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="handwriting-toolbar">
          <div class="tool-group">
            <label>Pen Color:</label>
            <input type="color" id="penColor" value="#000000">
          </div>
          <div class="tool-group">
            <label>Pen Size:</label>
            <input type="range" id="penSize" min="1" max="10" value="2" step="0.5">
            <span id="penSizeValue">2</span>px
          </div>
          <div class="tool-group">
            <label>Character Rotation:</label>
            <input type="range" id="charRotation" min="0" max="360" value="0" step="5">
            <span id="charRotationValue">0</span>°
          </div>
          <div class="tool-group">
            <label>
              <input type="checkbox" id="enableCharRotation" checked>
              Enable Character Rotation
            </label>
          </div>
          <div class="tool-group">
            <label>
              <input type="checkbox" id="enableScribble" checked>
              Enable Natural Scribble
            </label>
          </div>
          <div class="tool-group">
            <label>Scribble Intensity:</label>
            <input type="range" id="scribbleIntensity" min="0" max="10" value="3" step="0.5">
            <span id="scribbleIntensityValue">3</span>
          </div>
          <div class="tool-group">
            <button class="btn btn-secondary" onclick="clearCanvas()">Clear</button>
            <button class="btn btn-secondary" onclick="undoStroke()">Undo</button>
            <button class="btn btn-primary" onclick="testRotation()">Test 45° Rotation</button>
          </div>
        </div>

        <div class="canvas-container">
          <canvas id="handwritingCanvas" width="800" height="600"></canvas>
        </div>

        <div class="handwriting-info">
          <small>Draw your solution above. You can save it as an image or PDF.</small>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn" onclick="closeHandwritingModal()">Cancel</button>
        <button class="btn btn-secondary" onclick="saveAsImage()">Save as Image</button>
        <button class="btn btn-primary" onclick="saveAsPDF()">Save as PDF</button>
      </div>
    </div>
  </div>

  <script src="handwriting.js"></script>
  <script src="renderer.js"></script>
</body>
</html>
