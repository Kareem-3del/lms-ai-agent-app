<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LMS Center - Kareem Adel</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>LMS Center - Kareem Adel</h1>
      <div class="header-actions">
        <button id="debugBtn" class="btn">Debug</button>
        <button id="settingsBtn" class="btn">Settings</button>
      </div>
    </header>

    <div id="settingsPanel" class="settings-panel hidden">
      <h2>LMS Configuration</h2>
      <form id="settingsForm">
        <div class="form-group">
          <label for="lmsType">LMS Type:</label>
          <select id="lmsType" name="lmsType">
            <option value="canvas">Canvas</option>
            <option value="moodle">Moodle</option>
            <option value="blackboard">Blackboard</option>
          </select>
        </div>

        <div class="form-group">
          <label for="lmsUrl">LMS URL:</label>
          <input type="url" id="lmsUrl" name="lmsUrl" placeholder="https://your-lms.edu" required>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="useCredentialLogin" name="useCredentialLogin" checked>
            Use username/password (recommended)
          </label>
        </div>

        <div id="credentialFields">
          <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" placeholder="Your LMS username" autocomplete="username">
          </div>

          <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" placeholder="Your LMS password" autocomplete="current-password">
          </div>
        </div>

        <div id="tokenField" class="hidden">
          <div class="form-group">
            <label for="apiToken">API Token:</label>
            <input type="password" id="apiToken" name="apiToken" placeholder="Your API token">
            <small>Get your token from your LMS account settings</small>
          </div>
        </div>

        <div class="form-group">
          <label for="checkInterval">Check Interval (minutes):</label>
          <input type="number" id="checkInterval" name="checkInterval" value="15" min="5" max="120">
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="soundEnabled" name="soundEnabled" checked>
            Enable notification sound
          </label>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="autoDownload" name="autoDownload" checked>
            Automatically download assignment files
          </label>
        </div>

        <div class="form-group">
          <label for="downloadPath">Download Folder:</label>
          <input type="text" id="downloadPath" name="downloadPath" placeholder="Default: Documents/LMS Downloads">
          <small>Leave empty for default location</small>
        </div>

        <div class="form-group">
          <label for="geminiApiKey">Gemini API Key (Optional):</label>
          <input type="password" id="geminiApiKey" name="geminiApiKey" placeholder="For AI assignment solving">
          <small>Get your key from Google AI Studio</small>
        </div>

        <div class="form-group">
          <label for="geminiModel">Gemini Model:</label>
          <select id="geminiModel" name="geminiModel">
            <option value="">Loading models...</option>
          </select>
          <small>Choose AI model for solving assignments</small>
        </div>

        <div class="form-group">
          <label for="extraRules">Extra Rules for AI (Optional):</label>
          <textarea id="extraRules" name="extraRules" rows="4" placeholder="Add custom rules for AI to follow on every assignment...
Example:
- Always explain each step in detail
- Use simple language
- Include examples"></textarea>
          <small>These rules will be sent to AI with every assignment solution request</small>
        </div>

        <div class="form-group">
          <label>PDF Header Fields:</label>
          <div class="checkbox-group">
            <label><input type="checkbox" name="pdfHeaderField" value="name" checked> Assignment Name</label>
            <label><input type="checkbox" name="pdfHeaderField" value="id" checked> Assignment ID</label>
            <label><input type="checkbox" name="pdfHeaderField" value="course"> Course Name</label>
            <label><input type="checkbox" name="pdfHeaderField" value="dueDate"> Due Date</label>
            <label><input type="checkbox" name="pdfHeaderField" value="category"> Category</label>
            <label><input type="checkbox" name="pdfHeaderField" value="generated"> Generated Date</label>
          </div>
          <small>Select which information to show at the top of PDFs (default: Name + ID only)</small>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="useHandwriting" name="useHandwriting" checked>
            Use handwriting style for PDFs
          </label>
          <small>Makes text look handwritten with natural fonts and paper texture. Math equations rendered beautifully with LaTeX.</small>
        </div>

        <div class="form-group" id="handwritingOptions" style="display: none; margin-left: 1.5rem;">
          <label for="handwritingFont">Handwriting Font Style:</label>
          <select id="handwritingFont" name="handwritingFont">
            <optgroup label="‚≠ê Most Realistic & Natural">
              <option value="Homemade Apple" selected>Homemade Apple (Most Authentic)</option>
              <option value="Just Another Hand">Just Another Hand (Very Natural)</option>
              <option value="Covered By Your Grace">Covered By Your Grace (Casual)</option>
              <option value="Patrick Hand">Patrick Hand (Clean & Readable)</option>
              <option value="Handlee">Handlee (Neat Handwriting)</option>
            </optgroup>
            <optgroup label="üìù Casual & Friendly">
              <option value="Caveat">Caveat (Natural & Casual)</option>
              <option value="Indie Flower">Indie Flower (Playful)</option>
              <option value="Shadows Into Light">Shadows Into Light (Elegant)</option>
              <option value="Architects Daughter">Architects Daughter (Casual)</option>
              <option value="Gloria Hallelujah">Gloria Hallelujah (Cheerful)</option>
              <option value="Gochi Hand">Gochi Hand (Rounded)</option>
              <option value="The Girl Next Door">The Girl Next Door (Friendly)</option>
            </optgroup>
            <optgroup label="‚úçÔ∏è Bold & Expressive">
              <option value="Kalam">Kalam (Bold)</option>
              <option value="Permanent Marker">Permanent Marker (Marker Style)</option>
              <option value="Rock Salt">Rock Salt (Rough)</option>
              <option value="Amatic SC">Amatic SC (Bold Casual)</option>
            </optgroup>
            <optgroup label="üí´ Flowing & Elegant">
              <option value="Dancing Script">Dancing Script (Flowing Cursive)</option>
              <option value="Satisfy">Satisfy (Elegant Script)</option>
              <option value="Courgette">Courgette (Flowing)</option>
              <option value="League Script">League Script (Elegant)</option>
              <option value="Waiting for the Sunrise">Waiting for the Sunrise (Flowing)</option>
            </optgroup>
            <optgroup label="üé® Unique & Artistic">
              <option value="Reenie Beanie">Reenie Beanie (Natural Script)</option>
              <option value="Sue Ellen Francisco">Sue Ellen Francisco (Casual Script)</option>
              <option value="Schoolbell">Schoolbell (Educational)</option>
              <option value="Comic Neue">Comic Neue (Modern Comic)</option>
            </optgroup>
          </select>
          <small>Choose the font that best matches your natural handwriting style</small>
        </div>

        <div class="form-group" id="handwritingColorSize" style="display: none; margin-left: 1.5rem;">
          <label for="handwritingColor">Ink Color:</label>
          <div style="display: flex; gap: 10px; align-items: center;">
            <input type="color" id="handwritingColor" name="handwritingColor" value="#2d2d2d">
            <span id="handwritingColorPreview" style="font-size: 14px; color: #666;">Dark Gray (Natural)</span>
          </div>
          <small>Choose your pen/ink color (default: natural dark gray)</small>
        </div>

        <div class="form-group" id="handwritingFontSize" style="display: none; margin-left: 1.5rem;">
          <label for="fontSize">Font Size:</label>
          <div style="display: flex; gap: 10px; align-items: center;">
            <input type="range" id="fontSize" name="fontSize" min="14" max="24" value="18" step="1">
            <span id="fontSizeValue" style="min-width: 50px;">18px</span>
          </div>
          <small>Adjust the text size (14px - 24px, default: 18px)</small>
        </div>

        <div class="form-group" id="handwritingPaperStyle" style="display: none; margin-left: 1.5rem;">
          <label for="paperStyle">Paper Style:</label>
          <select id="paperStyle" name="paperStyle">
            <optgroup label="üìÑ Classic Papers">
              <option value="aged-vintage" selected>Aged Vintage Paper (Coffee Stains)</option>
              <option value="clean-white">Clean White Paper</option>
              <option value="cream-white">Cream White Paper</option>
              <option value="off-white">Off-White Paper</option>
              <option value="recycled">Recycled Paper (Eco)</option>
            </optgroup>
            <optgroup label="üìì Notebook Styles">
              <option value="lined-notebook">Lined Notebook Paper</option>
              <option value="college-ruled">College Ruled Paper</option>
              <option value="wide-ruled">Wide Ruled Paper</option>
              <option value="graph-paper">Graph Paper (Grid)</option>
              <option value="dot-grid">Dot Grid Paper</option>
              <option value="engineering">Engineering Paper</option>
            </optgroup>
            <optgroup label="üé® Textured & Artistic">
              <option value="parchment">Parchment Paper (Ancient)</option>
              <option value="watercolor">Watercolor Paper</option>
              <option value="canvas-texture">Canvas Texture</option>
              <option value="linen">Linen Paper</option>
              <option value="kraft">Kraft Paper (Brown)</option>
              <option value="newsprint">Newsprint (Gray)</option>
            </optgroup>
            <optgroup label="‚òï Aged & Worn">
              <option value="tea-stained">Tea Stained Paper</option>
              <option value="coffee-aged">Coffee Aged Paper</option>
              <option value="vintage-worn">Vintage Worn Paper</option>
              <option value="burned-edges">Burned Edges Paper</option>
              <option value="old-book">Old Book Page</option>
            </optgroup>
            <optgroup label="üíº Professional">
              <option value="legal-pad">Legal Pad (Yellow)</option>
              <option value="blueprint">Blueprint Paper</option>
              <option value="ledger">Ledger Paper</option>
              <option value="vellum">Vellum Paper</option>
            </optgroup>
            <optgroup label="üåà Colored Papers">
              <option value="pastel-blue">Pastel Blue</option>
              <option value="pastel-pink">Pastel Pink</option>
              <option value="pastel-yellow">Pastel Yellow</option>
              <option value="pastel-green">Pastel Green</option>
              <option value="light-gray">Light Gray</option>
            </optgroup>
          </select>
          <small>Choose paper texture and background style</small>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Save Settings</button>
          <button type="button" id="cancelBtn" class="btn">Cancel</button>
        </div>
      </form>
    </div>

    <div id="debugPanel" class="debug-panel hidden">
      <h2>Debug Console</h2>
      <button id="closeDebug" class="btn btn-close">√ó</button>
      <div class="debug-controls">
        <button id="clearLogs" class="btn">Clear</button>
        <button id="refreshData" class="btn">Refresh Data</button>
      </div>
      <div id="debugLogs" class="debug-logs"></div>
    </div>

    <main id="mainContent">
      <div class="status-bar">
        <span id="connectionStatus">Disconnected</span>
        <span id="lastCheck">Never checked</span>
      </div>

      <div class="view-controls">
        <button class="tab-btn active" data-view="courses">Courses</button>
        <button class="tab-btn" data-view="assignments">Assignments</button>
        <button class="tab-btn" data-view="lectures">Lectures</button>
      </div>

      <div id="coursesView" class="content-view">
        <div id="coursesList" class="courses-list">
          <div class="empty-state">
            <p>No courses found</p>
            <p class="hint">Configure your LMS settings to get started</p>
          </div>
        </div>
      </div>

      <div id="assignmentsView" class="content-view hidden">
        <div class="filter-controls">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="upcoming">Upcoming</button>
          <button class="filter-btn" data-filter="overdue">Overdue</button>
          <button class="filter-btn" data-filter="submitted">Submitted</button>
          <button class="filter-btn" data-filter="not-submitted">Not Submitted</button>
        </div>
        <div id="assignmentList" class="assignment-list">
          <div class="empty-state">
            <p>No assignments found</p>
            <p class="hint">All caught up!</p>
          </div>
        </div>
      </div>

      <div id="lecturesView" class="content-view hidden">
        <div id="lecturesList" class="lectures-list">
          <div class="empty-state">
            <p>No lectures found</p>
            <p class="hint">Check back later</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Submit Assignment Modal -->
  <div id="submitModal" class="modal hidden">
    <div class="modal-overlay" onclick="closeSubmitDialog()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Submit Assignment</h2>
        <button class="btn-close" onclick="closeSubmitDialog()">√ó</button>
      </div>
      <div class="modal-body">
        <div id="submitAssignmentInfo" class="submit-info"></div>

        <div class="form-group">
          <label for="submissionComment">Comment (Optional):</label>
          <textarea id="submissionComment" rows="3" placeholder="Add a comment for your submission..."></textarea>
        </div>

        <div class="form-group">
          <label>Attachments:</label>
          <div id="submissionAttachments" class="submission-attachments">
            <!-- Attachments will be populated here -->
          </div>
          <div class="attachment-buttons">
            <button type="button" class="btn btn-secondary" onclick="addCustomAttachment()">
              + Add File
            </button>
            <button type="button" class="btn btn-secondary" onclick="openHandwritingModal()">
              ‚úèÔ∏è Handwrite Solution
            </button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn" onclick="closeSubmitDialog()">Cancel</button>
        <button class="btn btn-primary" onclick="submitAssignment()">Submit Assignment</button>
      </div>
    </div>
  </div>

  <!-- Handwriting Modal -->
  <div id="handwritingModal" class="modal hidden">
    <div class="modal-overlay" onclick="closeHandwritingModal()"></div>
    <div class="modal-content handwriting-modal">
      <div class="modal-header">
        <h2>Handwriting Pad</h2>
        <button class="btn-close" onclick="closeHandwritingModal()">√ó</button>
      </div>
      <div class="modal-body">
        <div class="handwriting-toolbar">
          <div class="tool-group">
            <label>Pen Color:</label>
            <input type="color" id="penColor" value="#000000">
          </div>
          <div class="tool-group">
            <label>Pen Size:</label>
            <input type="range" id="penSize" min="1" max="10" value="2" step="0.5">
            <span id="penSizeValue">2</span>px
          </div>
          <div class="tool-group">
            <button class="btn btn-secondary" onclick="clearCanvas()">Clear</button>
            <button class="btn btn-secondary" onclick="undoStroke()">Undo</button>
          </div>
        </div>

        <div class="canvas-container">
          <canvas id="handwritingCanvas" width="800" height="600"></canvas>
        </div>

        <div class="handwriting-info">
          <small>Draw your solution above. You can save it as an image or PDF.</small>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn" onclick="closeHandwritingModal()">Cancel</button>
        <button class="btn btn-secondary" onclick="saveAsImage()">Save as Image</button>
        <button class="btn btn-primary" onclick="saveAsPDF()">Save as PDF</button>
      </div>
    </div>
  </div>

  <script src="handwriting.js"></script>
  <script src="renderer.js"></script>
</body>
</html>
